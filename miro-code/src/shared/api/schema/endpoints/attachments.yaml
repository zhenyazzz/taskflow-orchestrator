schemas:
  AttachmentResponse:
    type: object
    properties:
      id:
        type: string
        format: uuid
      taskId:
        type: string
        format: uuid
      fileName:
        type: string
      objectName:
        type: string
      size:
        type: integer
        format: int64
      url:
        type: string
        format: url
      fileType:
        type: string
      createdAt:
        type: string
        format: date-time

addAttachments:
  summary: Add attachments to a task
  description: Uploads one or more files as attachments to a specified task.
  security:
    - bearerAuth: []
  parameters:
    - in: path
      name: taskId
      schema:
        type: string
        format: uuid
      required: true
      description: ID of the task to add attachments to
  requestBody:
    required: true
    content:
      multipart/form-data:
        schema:
          type: object
          properties:
            files:
              type: array
              items:
                type: string
                format: binary
              description: List of files to upload
  responses:
    '201':
      description: Attachments added successfully
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/schemas/AttachmentResponse'
    '400':
      $ref: '../shared/responses.yaml#/BadRequestError'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'
    '404':
      $ref: '../shared/responses.yaml#/NotFoundError'

getAttachments:
  summary: Get attachments for a task
  description: Returns a list of attachments for a specified task
  security:
    - bearerAuth: []
  parameters:
    - in: path
      name: taskId
      schema:
        type: string
        format: uuid
      required: true
      description: ID of the task to retrieve attachments for
  responses:
    '200':
      description: A list of attachments
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/schemas/AttachmentResponse'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'
    '403':
      $ref: '../shared/responses.yaml#/ForbiddenError'
    '404':
      $ref: '../shared/responses.yaml#/NotFoundError'

deleteAttachment:
  summary: Delete attachments
  description: Deletes one or more attachments from a task
  security:
    - bearerAuth: []
  parameters:
    - in: path
      name: taskId
      schema:
        type: string
        format: uuid
      required: true
      description: ID of the task the attachments belong to
    - in: path
      name: attachmentIds
      schema:
        type: string
        pattern: "^[0-9a-fA-F\\-,]+$"
      required: true
      description: Comma-separated list of attachment IDs to delete
  responses:
    '204':
      description: Attachment(s) deleted successfully
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'
    '403':
      $ref: '../shared/responses.yaml#/ForbiddenError'
    '404':
      $ref: '../shared/responses.yaml#/NotFoundError'
